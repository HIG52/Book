## 집한론적 타입

### 최대타입
지금까지는 '아무 값이나 가능하다'는 사실을 타입을 표현할 방법이 없엇다.

앞서 본 true ? 1: false이다. 이코드는 아무런 오류를 일으키지 않음에도 1의 타입과 false의 타입이 다르다는 이유로 
타입검사를 통과하지 못하였다.

'이 부품의 결과는 아무 값이나 될수있다.' 를 표현하는 타입이 있다면 검사를 통과 했을것이다.

또 아무 값이나 인자로 받을수 있는 함수도 있다.
바로 Print 함수이다.
여러 언어에서 아무 값이나 출력이 가능하다.

'아무값이나 가능하다'를 표현하는 타입이 없다면 print 함수를 정의조차 하지 못하였을것이다.

이런 문제를 해결하는것이 최대타입이다.
최대타입이란 이름과 똑같이 '가장 큰' 타입을 의미한다.
다시말해 모든 값을 포함하는 타입이여서 어느 값이든 최대 타입에 속하게 된다.

이 정의에 따라 모든 타입은 최대타임의 서브타입이 될수가 있다.
모든 타입의 슈퍼 타입인 셈이다.
이책에서는 최대 타입은 Any라고 한다
(테스트 할때도 사용하는 Any()도 이거라고 볼수 있을거 같다.)

예시) 자바 : Object res = ... ? 1 : false;

### 최소 타입
예외는 개발자가 throw를 통해 의도적으로 발생시킬 수 있는 오류다. 
(앞으로 나올 내용은 예외가 발생하면 실행이 즉시 끝나는 것으로 간주한다.)

일반적인 예외로 인한 종료는 타입오류로 분류하지 않는다. 
다시말해 타입 검사를 통과한 프로그램이더라도 예외가 발생해 실행이 갑작스럽게 중단될 수 있는것이다.

최소타입은 예외를 다루는데 유용한 타입이다.
최소타입이 없다면
계산을 끝마쳤을때를 표현할 타입이 없다 (String 반환이 필요 할수도 있고 Int 반환이 필요할수도 있다.)
필요한것은 에러 처리일경우 '무언가를 끝마치지 못한다'를 표현해줄 타입이 필요하다.

어떤 값도 속하지 않는 점에서 void와 같다고 느낄수 있지만 void는 함수가 계산을 끝낼때 아무 값도 반환하지 않는다를 나타내고
최소타입은 함수가 계산을 끝마치지 못한다는 사실을 나타낸다.

최소 타입의 가장 중요한 특징은 최대타입의 반대로 모든타입의 서브타입이라는것이다.

최소 타입에 속하는 값은 곧 상자 안에 들어가있는 값이다. 계산이 끝나면 그상자가 열리고 값을 꺼내볼수 있다.
하지만 최소 타입은 계산을 끝마치지 못한다를 표현하니 계신이 끝날일도 없고 상자가 열릴 일도 없다.
곧 최소타입에 속하는 값이 존재하지 않다는 사실과도 일맥상통한다.

어차피 상자를 열수 없으니 이 상자안의 값은 정수다, 이 상자안의 값은 문자다 라고 하여도 올바르게 되는것이다.


### 이거나 타입
한 함수가 받는 인자 타입이 여러가지가 되어야 하는 경우 유용한 개념

예를들어 스프레드시트를 편집하는 프로그램을 만든다고 할경우 각 셀은 여러 데이터 형식을 가진다.
따라서 셀에 데이터를 쓸때는 데이터 타입에 맞게 셀의 형식을 설정해주어야 한다.
매번 데이터 형식을 불편하게 맞추어서 써야 한다는 것이다. 데이터가 int이면 writeInt, String 이면 wirteString 같은 형식으로 작성하여야 한다.
이거나 타입은 이런 불편을 해소해준다.
이거나 타입은 두개의 타입으로부터 만들어지는데 타입 A, B로 만든 이거나 타입은 A|B라 쓰며
직관적으로 A이거나 B를 나타낸다 (점잖게 말하면 합집합)
만약 사용할 경우 해당 변수가 정의된곳 뿐만 아니라 그 변수가 어디에서 사용되는지도 고려 해야한다.

### 이면서 타입
다중 상속을 다룰때 유용하다
A 이면서 B를 나타낸다
Float getGrade(Stuedent & Teacher st){
  return st.grades.get(st.course);
}
정도로 나타낼수 있다.

2.3 함수와 서브타입
여러 언어에서 함수를 값으로 사용 가능
(함수를 변수에 저장한다던가 다른 함수에 인자로 전달하거나 반환 한다는 뜻)
이렇게 값으로 사용되는 함수를 일급 함수 라고 부름

함수 타입은 매개 변수 타입의 서브 타입 관계를 뒤집는다.
A 가 B의 서브타입일때, B → C가 A → C의 서브타입이다.

일급함수를 사용하는 경우에는 함수 타입 사이의 서브타입 관계를 잘 판단 하는것이 필수

함수타입과 서브타입의 관계는 "함수타입은 매개변수 타입의 서브타입 관계를 뒤집고 결과 타입의 서브타입 관계를 유지한다" 라고 정리할수 있다.

---
타입 검사기의 서브타입 관계 판단 규칙 (정리)
최대타입 : 모든 타입은 최대 타입의 서브타입이다.
최소타입 : 최소 타입은 모든 타입의 서브타입이다.
이거나 타입 : A와 B는 A | B의 서브타입이다.
이면서 타입 : C가 A의 서브타입이면서 B의 서브타입이면 C는 A & B의 서브타입이다.
함수 타입 : A가 B의 서브타입이고 C가 D의 서브타입이면 B => C 는 A => D의 서브타입이다.

---
후기 : 이거나 타입 이면서 타입을 예제가 타입스크립트, 스칼라로 이루어져있어 사용해본적도 없기에 이해가 어려웠다.
대충 이~~ 타입이라는것은 내용물이 들어있는 상자 정도로 이해하였다.
자바 예제가 있는 설명의 경우 추후 총 정리때 풀어서 다시 확인할 예정이다.


























